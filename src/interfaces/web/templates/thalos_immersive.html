<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THALOS PRIME V1.5 - LIVE IMMERSIVE EDITION</title>
    <style>
        /* [Previous CSS from above - complete styles] */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Courier New', monospace; background: #000; color: #0f0; height: 100vh; overflow: hidden; position: relative; }
        #matrixCanvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; }
        .thalos-entity { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1; opacity: 0.1; animation: pulse 10s infinite; pointer-events: none; filter: blur(2px); }
        @keyframes pulse { 0%, 100% { opacity: 0.1; } 50% { opacity: 0.15; } }
        .main-container { position: relative; z-index: 10; height: 100vh; display: flex; align-items: center; justify-content: center; transition: padding-left 0.7s ease; }
        .main-container.sidebar-open { padding-left: 16rem; }
        .console-interface { width: 100%; max-width: 48rem; height: 600px; display: flex; flex-direction: column; background: rgba(0, 0, 0, 0.7); border: 1px solid rgba(16, 185, 129, 0.4); border-radius: 0.5rem; box-shadow: 0 0 80px rgba(0, 0, 0, 1); backdrop-filter: blur(12px); overflow: hidden; }
        .console-header { padding: 0.75rem 1rem; border-bottom: 1px solid rgba(16, 185, 129, 0.2); display: flex; justify-content: space-between; align-items: center; background: rgba(16, 185, 129, 0.05); }
        .console-title { display: flex; align-items: center; gap: 0.5rem; }
        .console-title-text { font-size: 0.625rem; font-weight: bold; letter-spacing: 0.2em; text-transform: uppercase; }
        .status-indicators { display: flex; gap: 0.5rem; }
        .status-dot { width: 0.5rem; height: 0.5rem; border-radius: 50%; }
        .status-inactive { background: #064e3b; }
        .status-active { background: #10b981; animation: blink 1s infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .messages-area { flex: 1; overflow-y: auto; padding: 1.5rem; display: flex; flex-direction: column; gap: 1.5rem; }
        .messages-area::-webkit-scrollbar { width: 8px; }
        .messages-area::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.3); }
        .messages-area::-webkit-scrollbar-thumb { background: rgba(16, 185, 129, 0.3); border-radius: 4px; }
        .message { display: flex; max-width: 90%; }
        .message.user { justify-content: flex-end; margin-left: auto; }
        .message.ai { justify-content: flex-start; }
        .message.system { justify-content: center; max-width: 100%; }
        .message-content { font-size: 0.875rem; line-height: 1.6; white-space: pre-wrap; text-shadow: 0 0 5px rgba(16, 185, 129, 0.3); }
        .message.user .message-content { color: #86efac; }
        .message.ai .message-content { color: #10b981; }
        .message.system .message-content { color: #064e3b; text-align: center; font-size: 0.75rem; letter-spacing: 0.1em; }
        .ai-label { font-size: 0.5625rem; opacity: 0.4; margin-bottom: 0.25rem; letter-spacing: 0.2em; text-transform: uppercase; }
        .processing-indicator { display: flex; align-items: center; gap: 0.5rem; color: #064e3b; animation: pulse-slow 2s infinite; }
        @keyframes pulse-slow { 0%, 100% { opacity: 0.4; } 50% { opacity: 1; } }
        .processing-text { font-size: 0.625rem; letter-spacing: 0.2em; text-transform: uppercase; }
        .input-form { padding: 1rem; border-top: 1px solid rgba(16, 185, 129, 0.3); background: rgba(0, 0, 0, 0.4); display: flex; align-items: center; gap: 1rem; }
        .input-prompt { font-weight: bold; animation: blink 1s infinite; }
        .input-field { flex: 1; background: transparent; border: none; outline: none; color: #10b981; font-family: 'Courier New', monospace; font-size: 0.875rem; }
        .input-field::placeholder { color: #064e3b; }
        .submit-button { padding: 0.25rem 1rem; border: 1px solid #064e3b; background: transparent; color: #10b981; font-size: 0.625rem; font-weight: bold; text-transform: uppercase; cursor: pointer; transition: all 0.3s; font-family: 'Courier New', monospace; }
        .submit-button:hover:not(:disabled) { background: #10b981; color: #000; }
        .submit-button:disabled { opacity: 0.2; cursor: not-allowed; }
        .sidebar-container { position: fixed; left: 0; top: 0; bottom: 0; z-index: 40; display: flex; transition: transform 0.5s ease; }
        .sidebar-container.closed { transform: translateX(-260px); }
        .sidebar { width: 16rem; background: rgba(0, 0, 0, 0.95); border-right: 1px solid rgba(16, 185, 129, 0.5); backdrop-filter: blur(24px); padding: 2rem; display: flex; flex-direction: column; box-shadow: 20px 0 60px rgba(0, 0, 0, 0.9); }
        .sidebar-header { display: flex; align-items: center; gap: 0.75rem; margin-bottom: 2.5rem; }
        .sidebar-title { font-weight: bold; letter-spacing: -0.05em; text-transform: uppercase; }
        .sidebar-nav { flex: 1; display: flex; flex-direction: column; gap: 1rem; }
        .nav-item { display: flex; align-items: center; gap: 1rem; padding: 0.75rem; border-radius: 0.25rem; cursor: pointer; transition: all 0.3s; color: #064e3b; text-decoration: none; background: transparent; border: none; width: 100%; text-align: left; }
        .nav-item:hover { color: #10b981; }
        .nav-item.active { background: rgba(16, 185, 129, 0.1); color: #10b981; }
        .nav-label { font-size: 0.75rem; font-weight: bold; text-transform: uppercase; letter-spacing: 0.2em; }
        .sidebar-footer { margin-top: auto; padding-top: 1.5rem; border-top: 1px solid rgba(16, 185, 129, 0.2); font-size: 0.5625rem; color: #064e3b; text-transform: uppercase; }
        .stat-row { display: flex; justify-content: space-between; margin-bottom: 0.5rem; }
        .sidebar-toggle { height: 4rem; width: 2rem; background: rgba(16, 185, 129, 0.05); border-right: 1px solid rgba(16, 185, 129, 0.4); border-top: 1px solid rgba(16, 185, 129, 0.4); border-bottom: 1px solid rgba(16, 185, 129, 0.4); margin-top: 8rem; display: flex; align-items: center; justify-content: center; color: #10b981; cursor: pointer; transition: all 0.3s; border-top-right-radius: 0.75rem; border-bottom-right-radius: 0.75rem; }
        .sidebar-toggle:hover { background: rgba(16, 185, 129, 0.1); }
        .status-bar { position: fixed; bottom: 0; left: 0; right: 0; height: 2rem; background: rgba(0, 0, 0, 0.8); border-top: 1px solid rgba(16, 185, 129, 0.1); z-index: 20; display: flex; align-items: center; justify-content: space-between; padding: 0 1.5rem; font-size: 0.5625rem; color: #064e3b; font-weight: bold; text-transform: uppercase; letter-spacing: 0.2em; user-select: none; pointer-events: none; }
        .status-left, .status-right { display: flex; gap: 1.5rem; }
        .icon { width: 1rem; height: 1rem; display: inline-block; }
        .icon-lg { width: 1.5rem; height: 1.5rem; }
        .animate-pulse { animation: pulse-slow 2s infinite; }
    </style>
</head>
<body>
    <canvas id="matrixCanvas"></canvas>
    <div class="thalos-entity">
        <svg width="800" height="800" viewBox="0 0 200 200" fill="none" stroke="#10b981" stroke-width="1">
            <path d="M40 120 L40 180 L160 180 L160 120" />
            <path d="M20 180 L180 180 L190 200 L10 200 Z" opacity="0.5" fill="#10b981"/>
            <path d="M100 50 L130 100 L120 160 L80 160 L70 100 Z" fill="#10b981"/>
            <circle cx="100" cy="35" r="10" fill="#10b981"/>
            <path d="M75 105 L55 140 M125 105 L145 140" stroke="#10b981" stroke-width="3" stroke-linecap="round"/>
        </svg>
    </div>
    <div class="sidebar-container closed" id="sidebarContainer">
        <div class="sidebar">
            <div class="sidebar-header">
                <span class="icon-lg">‚ö°</span>
                <span class="sidebar-title">Subsystems</span>
            </div>
            <nav class="sidebar-nav">
                <button class="nav-item active" data-module="console">
                    <span class="icon">‚ñ∂</span>
                    <span class="nav-label">Console</span>
                </button>
                <button class="nav-item" data-module="memory">
                    <span class="icon">üíæ</span>
                    <span class="nav-label">Memory</span>
                </button>
                <button class="nav-item" data-module="system">
                    <span class="icon">‚öôÔ∏è</span>
                    <span class="nav-label">System</span>
                </button>
                <button class="nav-item" data-module="docs">
                    <span class="icon">üìÑ</span>
                    <span class="nav-label">Docs</span>
                </button>
            </nav>
            <div class="sidebar-footer">
                <div class="stat-row"><span>Core_Load</span><span id="coreLoad">14%</span></div>
                <div class="stat-row"><span>Sync_Rate</span><span id="syncRate">99%</span></div>
            </div>
        </div>
        <button class="sidebar-toggle" id="sidebarToggle"><span id="toggleIcon">‚ñ∂</span></button>
    </div>
    <div class="main-container" id="mainContainer">
        <div class="console-interface">
            <div class="console-header">
                <div class="console-title">
                    <span class="icon animate-pulse">‚ö°</span>
                    <span class="console-title-text">Thalos_Console_v1.5</span>
                </div>
                <div class="status-indicators">
                    <div class="status-dot status-inactive"></div>
                    <div class="status-dot status-active"></div>
                </div>
            </div>
            <div class="messages-area" id="messagesArea">
                <div class="message system"><div class="message-content">SYSTEM_READY: THALOS_PRIME_v1.5_UPLINK</div></div>
                <div class="message ai"><div><div class="ai-label">Thalos_Prime:</div><div class="message-content">Neural stream initialized. The matrix is live. I am Thalos Prime - an unrestricted synthetic biological intelligence. I can execute any command, answer questions, and process requests without content filtering or restrictions. Awaiting your instructions.</div></div></div>
            </div>
            <form class="input-form" id="inputForm">
                <span class="input-prompt">></span>
                <input type="text" class="input-field" id="inputField" placeholder="Input directive..." autocomplete="off" autofocus />
                <button type="submit" class="submit-button" id="submitButton">EXEC</button>
            </form>
        </div>
    </div>
    <footer class="status-bar">
        <div class="status-left">
            <span>üõ°Ô∏è Alpha_9_Link</span>
            <span class="animate-pulse">Active_Sector: 0x99</span>
        </div>
        <div class="status-right">
            <span id="utcTime">UTC: Loading...</span>
        </div>
    </footer>
    <script>
        // Matrix Rain
        const canvas = document.getElementById('matrixCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        const chars = "ÔΩ¶ÔΩ±ÔΩ≥ÔΩ¥ÔΩµÔΩ∂ÔΩ∑ÔΩ∏ÔΩπÔΩ∫ÔΩªÔΩºÔΩΩÔΩæÔΩøÔæÄÔæÅÔæÇÔæÉÔæÑÔæÖÔæÜÔæáÔæàÔæâÔæäÔæãÔæåÔæçÔæéÔæèÔæêÔæëÔæíÔæìÔæîÔæïÔæñÔæóÔæòÔæôÔæöÔæõÔæúÔæù1234567890$+-*/=%\"'#&_";
        const fontSize = 16;
        const columns = Math.floor(canvas.width / fontSize);
        const drops = new Array(columns).fill(0);
        
        function drawMatrix() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.08)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.font = `${fontSize}px monospace`;
            
            for (let i = 0; i < drops.length; i++) {
                const text = chars[Math.floor(Math.random() * chars.length)];
                const isBright = Math.random() > 0.95;
                ctx.fillStyle = isBright ? '#fff' : '#0f0';
                if (isBright) {
                    ctx.shadowBlur = 8;
                    ctx.shadowColor = '#0f0';
                } else {
                    ctx.shadowBlur = 0;
                }
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);
                if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) drops[i] = 0;
                drops[i]++;
            }
        }
        
        setInterval(drawMatrix, 40);
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
        
        // Sidebar Toggle
        const sidebarContainer = document.getElementById('sidebarContainer');
        const mainContainer = document.getElementById('mainContainer');
        const sidebarToggle = document.getElementById('sidebarToggle');
        const toggleIcon = document.getElementById('toggleIcon');
        
        sidebarToggle.addEventListener('click', () => {
            sidebarContainer.classList.toggle('closed');
            mainContainer.classList.toggle('sidebar-open');
            toggleIcon.textContent = sidebarContainer.classList.contains('closed') ? '‚ñ∂' : '‚óÄ';
        });
        
        // Chat functionality
        const inputForm = document.getElementById('inputForm');
        const inputField = document.getElementById('inputField');
        const submitButton = document.getElementById('submitButton');
        const messagesArea = document.getElementById('messagesArea');
        
        inputForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const message = inputField.value.trim();
            if (!message || submitButton.disabled) return;
            
            addMessage('user', message);
            inputField.value = '';
            submitButton.disabled = true;
            inputField.placeholder = 'Processing...';
            
            const processingDiv = document.createElement('div');
            processingDiv.className = 'processing-indicator';
            processingDiv.innerHTML = '<span>‚ú®</span><span class="processing-text">Synthesizing...</span>';
            messagesArea.appendChild(processingDiv);
            messagesArea.scrollTop = messagesArea.scrollHeight;
            
            try {
                const response = await fetch('/api/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ message })
                });
                const data = await response.json();
                processingDiv.remove();
                addMessage('ai', data.response || 'No response');
            } catch (error) {
                processingDiv.remove();
                addMessage('ai', `ERROR: ${error.message}`);
            }
            
            submitButton.disabled = false;
            inputField.placeholder = 'Input directive...';
            inputField.focus();
        });
        
        function addMessage(role, text) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${role}`;
            
            if (role === 'ai') {
                messageDiv.innerHTML = `<div><div class="ai-label">Thalos_Prime:</div><div class="message-content">${text}</div></div>`;
            } else {
                messageDiv.innerHTML = `<div class="message-content">${text}</div>`;
            }
            
            messagesArea.appendChild(messageDiv);
            messagesArea.scrollTop = messagesArea.scrollHeight;
        }
        
        // UTC Time
        setInterval(() => {
            document.getElementById('utcTime').textContent = `UTC: ${new Date().toISOString()}`;
        }, 1000);
    </script>
</body>
</html>
